(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/goods/goods"],{2178:function(o,t,s){"use strict";(function(o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=s("26cb");function i(o,t){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(o);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),s.push.apply(s,e)}return s}function n(o){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?i(Object(s),!0).forEach((function(t){c(o,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(s,t))}))}return o}function c(o,t,s){return t in o?Object.defineProperty(o,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[t]=s,o}var f=function(){Promise.all([s.e("common/vendor"),s.e("components/goods/details")]).then(function(){return resolve(s("5743"))}.bind(null,s)).catch(s.oe)},r={name:"goods-component",data:function(){return{classifyItems:[],goodsInfo:[],scrollTop:"",scrollItemsTop:"",isDetailsShow:!1}},props:{show:{type:Boolean,default:!1},goodsId:{type:String,default:""},branchShopId:{type:String,default:""},shopGoods:{type:Array,default:function(){return[]}},goodsItems:{type:Array,default:function(){return[]}},goodsAmount:{type:Number,default:0}},mounted:function(){this.goodsTop=0,this.goodsHeight=0,this.goodsLeft=0,this.goodsJson={},this.shopGoods&&this.shopGoods.length>0&&(this.classifyItems=this.shopGoods),this.goodsItems&&this.goodsItems.length>0&&(this.goodsInfo=this.goodsItems),this.isGoodsPosition=!0},methods:n(n({},(0,e.mapMutations)({SET_GOODS_POSITION:"goods/SET_GOODS_POSITION",SHOW_AMOUNT_INPUT:"goods/SHOW_AMOUNT_INPUT",HIDE_AMOUNT_INPUT:"goods/HIDE_AMOUNT_INPUT"})),{},{goodsActives:function(o){var t=this;if(this.classifyItems.length>0){for(var s=0;s<this.classifyItems.length;s++)if(this.classifyItems[s].active){this.classifyItems[s].active=!1;break}this.classifyItems[o].active=!0,this.$set(this.classifyItems,o,this.classifyItems[o]),setTimeout((function(){t.scrollTop=t.classifyItems[o].goodsTop}),50)}},getGoodsPosition:function(){var t=this,s=o.createSelectorQuery().in(this).select(".goods-wrap");s.boundingClientRect((function(s){t.goodsTop=s.top,t.goodsHeight=s.height,t.goodsLeft=s.left;var e=o.createSelectorQuery().in(t).selectAll(".goods-classify-wrap");e.boundingClientRect((function(s){if(s.length>0){for(var e=0,i=0;i<s.length;i++)e=s[i].top-t.goodsTop,t.classifyItems[i].goodsTop=e,t.classifyItems[i].goodsHeight=s[i].height;var n=o.createSelectorQuery().in(t).selectAll(".goods-list");n.boundingClientRect((function(o){if(o.length>0){for(var s=0,e=0;e<t.goodsInfo.length;e++)for(var i=0;i<t.goodsInfo[e].goods.length;i++){t.goodsInfo[e].goods[i].top=o[s].top,s++;var n=t.goodsInfo[e].goods[i].gid;t.goodsJson[n]=t.goodsInfo[e].goods[i].top}t.setItemPosition()}})).exec()}})).exec()})).exec()},goodsScroll:function(o){if(this.classifyItems.length>0)for(var t=0;t<this.classifyItems.length;t++)if(this.classifyItems[t].goodsTop<=o.detail.scrollTop&&o.detail.scrollTop<=this.classifyItems[t].goodsTop+this.classifyItems[t].goodsHeight){for(var s in this.classifyItems)if(this.classifyItems[s].active){this.classifyItems[s].active=!1;break}for(var e in parseInt(o.detail.scrollTop/o.detail.scrollHeight*100)>=90?this.classifyItems[this.classifyItems.length-1].active=!0:this.classifyItems[t].active=!0,this.scrollItemsTop=this.classifyItems[t].top,this.goodsInfo)if("fixed"===this.goodsInfo[e].position){this.goodsInfo[e].position="static",this.goodsInfo[e].top=0,this.goodsInfo[e].left=0,this.SET_GOODS_POSITION({index:e,position:"static",top:0,left:0});break}this.goodsInfo[t].position="fixed",this.goodsInfo[t].left=this.goodsLeft,this.goodsInfo[t].top=this.goodsTop-10,this.SET_GOODS_POSITION({index:t,position:"fixed",top:this.goodsTop-10,left:this.goodsLeft})}},getGoodsItemsPosition:function(){var t=this,s=o.createSelectorQuery().in(this).select(".classify");s.boundingClientRect((function(s){var e=s.top,i=o.createSelectorQuery().in(t).selectAll(".classify .item");i.boundingClientRect((function(o){if(o.length>0)for(var s=0;s<o.length;s++)t.classifyItems[s].top=o[s].top-e})).exec()})).exec()},setItemPosition:function(){var o=this;this.goodsId&&this.goodsInfo.length>0&&(console.log(this.goodsJson[this.goodsId]),setTimeout((function(){o.scrollTop=o.goodsJson[o.goodsId]-o.goodsTop-50}),50))},showAmountInput:function(o,t){this.SHOW_AMOUNT_INPUT({index:o,index2:t})},hideAmountInput:function(o,t,s,e,i,n){this.$emit("setGoodsAmountInput",o,t,s,e),this.HIDE_AMOUNT_INPUT({index:i,index2:n})},showGoodsDetails:function(t){t.stock>0?"0"===t.is_meal&&(this.isDetailsShow=!0):o.showToast({title:"菜品暂时不可选购哦，再看看别的啦！",icon:"none"}),this.$emit("showGoodsDetails",t)},isLoginStatus:function(o,t,s){this.$emit("incAmount",o,t,s)},decAmount:function(o,t,s){this.$emit("decAmount",o,t,s)}}),components:{Details:f},watch:{shopGoods:function(o){this.classifyItems=o},goodsItems:function(o){this.goodsInfo=o},goods:function(){this.getGoodsItemsPosition()},goodsInfo:function(){this.isGoodsPosition&&(this.isGoodsPosition=!1,this.getGoodsPosition())}}};t.default=r}).call(this,s("543d")["default"])},2610:function(o,t,s){"use strict";var e;s.d(t,"b",(function(){return i})),s.d(t,"c",(function(){return n})),s.d(t,"a",(function(){return e}));var i=function(){var o=this,t=o.$createElement;o._self._c;o._isMounted||(o.e0=function(t){o.isDetailsShow=!1})},n=[]},"77fb":function(o,t,s){"use strict";s.r(t);var e=s("2610"),i=s("d5d5");for(var n in i)"default"!==n&&function(o){s.d(t,o,(function(){return i[o]}))}(n);s("b997");var c,f=s("f0c5"),r=Object(f["a"])(i["default"],e["b"],e["c"],!1,null,"1a4ae6fc",null,!1,e["a"],c);t["default"]=r.exports},b997:function(o,t,s){"use strict";var e=s("f556"),i=s.n(e);i.a},d5d5:function(o,t,s){"use strict";s.r(t);var e=s("2178"),i=s.n(e);for(var n in e)"default"!==n&&function(o){s.d(t,o,(function(){return e[o]}))}(n);t["default"]=i.a},f556:function(o,t,s){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/goods/goods-create-component',
    {
        'components/goods/goods-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("77fb"))
        })
    },
    [['components/goods/goods-create-component']]
]);
