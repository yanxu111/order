(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/meal"],{"2eba":function(t,e,o){"use strict";o.r(e);var a=o("a5f4"),i=o.n(a);for(var n in a)"default"!==n&&function(t){o.d(e,t,(function(){return a[t]}))}(n);e["default"]=i.a},"40d6":function(t,e,o){"use strict";var a;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return n})),o.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},n=[]},"4bda":function(t,e,o){"use strict";(function(t){o("b225");a(o("66fd"));var e=a(o("e31c"));function a(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=o,t(e.default)}).call(this,o("543d")["createPage"])},a5f4:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o("26cb");function i(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,a)}return o}function n(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var r={name:"meal",onLoad:function(e){var o=this;this.gid=e.gid?e.gid:"",this.branch_shop_id=e.branch_shop_id?e.branch_shop_id:"",this.table_code=e.table_code?e.table_code:"",this.mealInfo=[],this.mealGid=[],this.isSubmit=!0,this.getGoodsMeal({branch_shop_id:this.branch_shop_id,gid:this.gid,success:function(){o.addCartData()}}),this.getGoodsMealTitle({branch_shop_id:this.branch_shop_id,gid:this.gid,success:function(){t.setNavigationBarTitle({title:o.goodsMealTitle.title})}})},methods:n(n(n({},(0,a.mapActions)({getGoodsMeal:"goods/getGoodsMeal",getGoodsMealTitle:"goods/getGoodsMealTitle",saveCart:"cart/saveCart"})),(0,a.mapMutations)({SET_GOODS_MEAL_ACTIVE:"goods/SET_GOODS_MEAL_ACTIVE"})),{},{checkGoodsMeal:function(t,e){this.SET_GOODS_MEAL_ACTIVE({index:t,index2:e}),this.$set(this.goodsMeal[t].goods,e,this.goodsMeal[t].goods[e]),this.addCartData()},addCartData:function(){if(this.goodsMeal.length>0){this.mealInfo=[],this.mealGid=[];for(var t=[],e=0;e<this.goodsMeal.length;e++)for(var o=0;o<this.goodsMeal[e].goods.length;o++)this.goodsMeal[e].goods[o].active&&t.push(n({amount:"1",dis_amount:"1"},this.goodsMeal[e].goods[o]));if(t.length>0){for(var a={},i=[],s=0;s<t.length;s++)if(a[t[s].gid]){if(i.length>0)for(var r=0;r<i.length;r++)t[s].gid===i[r].gid&&(i[r].amount++,i[r].dis_amount=i[r].amount)}else a[t[s].gid]=!0,i.push(t[s]),this.mealGid.push({gid:t[s].gid});this.mealInfo=i}}},addCart:function(){var e=this;this.$token.safeUser(this,this.branch_shop_id,this.table_code,(function(){if(e.isSubmit){e.isSubmit=!1;var o={title:e.goodsMealTitle,price:e.total,gid:e.gid,amount:1,branch_shop_id:e.branch_shop_id,table_code:e.table_code,meal_items:e.mealInfo,place_type:"0",is_meal:"1",meal_type:"1",new_meal_items:e.mealGid,amountInput:!1,amountInputFocus:!1};e.saveCart({cartData:o,success:function(){t.showToast({title:"添加成功",icon:"success",duration:2e3,success:function(){setTimeout((function(){t.hideToast(),t.navigateBack({delta:1})}),2e3)}})}})}}))}}),computed:n(n({},(0,a.mapState)({goodsMeal:function(t){return t.goods.goodsMeal},goodsMealTitle:function(t){return t.goods.goodsMealTitle}})),{},{total:function(){for(var t=0,e=0;e<this.goodsMeal.length;e++)for(var o=0;o<this.goodsMeal[e].goods.length;o++)this.goodsMeal[e].goods[o].active&&(t+=parseFloat(this.goodsMeal[e].goods[o].meal_price));return t.toFixed(2)}}),watch:{goodsMealTitle:function(t){}}};e.default=r}).call(this,o("543d")["default"])},ae55:function(t,e,o){"use strict";var a=o("d485"),i=o.n(a);i.a},d485:function(t,e,o){},e31c:function(t,e,o){"use strict";o.r(e);var a=o("40d6"),i=o("2eba");for(var n in i)"default"!==n&&function(t){o.d(e,t,(function(){return i[t]}))}(n);o("ae55");var s,r=o("f0c5"),d=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"cead3aa2",null,!1,a["a"],s);e["default"]=d.exports}},[["4bda","common/runtime","common/vendor"]]]);