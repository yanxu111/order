(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["user_pages/profile/index"],{"0674":function(e,t,n){"use strict";n.r(t);var r=n("e20d"),i=n.n(r);for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=i.a},"22c6":function(e,t,n){"use strict";var r;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r}));var i=function(){var e=this,t=e.$createElement;e._self._c},o=[]},"50bb":function(e,t,n){"use strict";(function(e){n("b225");r(n("66fd"));var t=r(n("be64"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},b057:function(e,t,n){},be64:function(e,t,n){"use strict";n.r(t);var r=n("22c6"),i=n("0674");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("e9f7");var a,s=n("f0c5"),u=Object(s["a"])(i["default"],r["b"],r["c"],!1,null,"2d8c5962",null,!1,r["a"],a);t["default"]=u.exports},e20d:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("26cb");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s={name:"profile",data:function(){return{nickName:"",proName:"",userheadImageUrl:"",userGender:"",saveImage:"",isSubmit:!0}},onLoad:function(e){this.branch_shop_id=e.branch_shop_id?e.branch_shop_id:"",this.table_code=e.table_code?e.table_code:"",this.getUserInfo({branch_shop_id:this.branch_shop_id})},methods:o(o({},(0,r.mapActions)({getUserInfo:"my/getUserInfo",saveUserInfo:"my/saveUserInfo"})),{},{onChooseAvatar:function(t){var n=this;this.userheadImageUrl=t.detail.avatarUrl,e.uploadFile({url:this.$config.baseApi+"/api/v1/user/uploadhead",filePath:this.userheadImageUrl,name:"head",formData:{uid:this.uid,token:this.token,platform:this.platform},success:function(e){n.saveImage=JSON.parse(e.data).data.msbox}})},inputInfo:function(e){this.nickName=e.detail.value},changeGender:function(){var t=this;e.showActionSheet({itemList:["男","女"],success:function(e){t.userGender=(e.tapIndex+1).toString(),console.log(t.userGender)},fail:function(e){console.log(e.errMsg)}})},submitUserInfo:function(){var t=this;this.isSubmit&&(this.isSubmit=!1,""===this.proName||""===this.nickname||""===this.userGender||""===this.saveImage?e.showToast({title:"请完善必填信息",icon:"none",duration:2e3}):this.saveUserInfo({branch_shop_id:this.branch_shop_id,head:this.saveImage,name:this.proName,nickname:this.nickName,gender:this.userGender,success:function(n){200===n.code?(t.isSubmit=!0,e.showToast({title:"提交成功",icon:"success",duration:2e3,success:function(){setTimeout((function(){e.navigateBack({delta:1})}),2e3)}})):(t.isSubmit=!0,e.showToast({title:n.data,icon:"error",duration:2e3}))}}))}}),computed:o({},(0,r.mapState)({userInfo:function(e){return e.my.userInfo},uid:function(e){return e.login.uid},token:function(e){return e.login.token},platform:function(e){return e.system.plateform}})),watch:{userInfo:function(e){this.nickName=e.nickname,this.proName=e.name,this.userheadImageUrl=e.head,this.userGender=e.gender}}};t.default=s}).call(this,n("543d")["default"])},e9f7:function(e,t,n){"use strict";var r=n("b057"),i=n.n(r);i.a}},[["50bb","common/runtime","common/vendor"]]]);